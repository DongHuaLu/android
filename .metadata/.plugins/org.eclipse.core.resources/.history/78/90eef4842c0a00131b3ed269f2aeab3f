package com.example.login.service;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.Map;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;

public class LoginService {

	public static boolean saveUserInfo(Context context, String username,
			String password, int mode) {
		SharedPreferences sp = context.getSharedPreferences("config",
				Context.MODE_PRIVATE);
		Editor editor = sp.edit();
		editor.putString("username", username);
		editor.putString("password", password);
		editor.commit();
		return true;
	}

	public static Map<String, String> getSavedUserInfo(Context context) {
		BufferedReader br = null;
		FileInputStream fis = null;
		File file = null;
		try {
			file = new File(context.getFilesDir(), "info.txt");
			fis = new FileInputStream(file);
			br = new BufferedReader(new InputStreamReader(fis));
			try {
				String str = br.readLine();
				String[] infos = str.split(",");
				Map<String, String> infomap = new HashMap<String, String>();
				infomap.put("username", infos[0]);
				infomap.put("password", infos[1]);
				br.close();
				fis.close();
				return infomap;
			} catch (IOException e) {
				e.printStackTrace();
				return null;
			}

		} catch (FileNotFoundException e) {
			e.printStackTrace();
			return null;
		}
	}
}
